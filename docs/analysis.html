<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>A Quick Start Guide to Survey Research</title>
  <meta name="description" content="A quick start guide to survey research">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="A Quick Start Guide to Survey Research" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="A quick start guide to survey research" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="A Quick Start Guide to Survey Research" />
  
  <meta name="twitter:description" content="A quick start guide to survey research" />
  

<meta name="author" content="Liz Carey (and hopefully many others)">


<meta name="date" content="2019-01-25">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="writing-effective-survey-questions.html">
<link rel="next" href="appendixA.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Survey Research Quick Start</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome to survey research</a></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html"><i class="fa fa-check"></i>Preface</a><ul>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html#outline"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html#prerequisites"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html#acknowledgements"><i class="fa fa-check"></i>Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="macro.html"><a href="macro.html"><i class="fa fa-check"></i><b>1</b> Designing a survey</a><ul>
<li class="chapter" data-level="1.1" data-path="macro.html"><a href="macro.html#what-is-your-research-goal"><i class="fa fa-check"></i><b>1.1</b> What is your research goal?</a></li>
<li class="chapter" data-level="1.2" data-path="macro.html"><a href="macro.html#who-are-you-studying"><i class="fa fa-check"></i><b>1.2</b> Who are you studying?</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="writing-effective-survey-questions.html"><a href="writing-effective-survey-questions.html"><i class="fa fa-check"></i><b>2</b> Writing effective survey questions</a></li>
<li class="chapter" data-level="3" data-path="analysis.html"><a href="analysis.html"><i class="fa fa-check"></i><b>3</b> Survey Analysis</a><ul>
<li class="chapter" data-level="3.1" data-path="analysis.html"><a href="analysis.html#organize-your-workspace"><i class="fa fa-check"></i><b>3.1</b> Organize your workspace</a></li>
<li class="chapter" data-level="3.2" data-path="analysis.html"><a href="analysis.html#data-cleaning"><i class="fa fa-check"></i><b>3.2</b> Data Cleaning</a><ul>
<li class="chapter" data-level="3.2.1" data-path="analysis.html"><a href="analysis.html#load-the-data"><i class="fa fa-check"></i><b>3.2.1</b> Load the data</a></li>
<li class="chapter" data-level="3.2.2" data-path="analysis.html"><a href="analysis.html#loading-qualtrics-data"><i class="fa fa-check"></i><b>3.2.2</b> Loading Qualtrics data</a></li>
<li class="chapter" data-level="3.2.3" data-path="analysis.html"><a href="analysis.html#preview-the-data"><i class="fa fa-check"></i><b>3.2.3</b> Preview the data</a></li>
<li class="chapter" data-level="3.2.4" data-path="analysis.html"><a href="analysis.html#joining-data-sets"><i class="fa fa-check"></i><b>3.2.4</b> Joining data sets</a></li>
<li class="chapter" data-level="3.2.5" data-path="analysis.html"><a href="analysis.html#removing-duplicate-values"><i class="fa fa-check"></i><b>3.2.5</b> Removing duplicate values</a></li>
</ul></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="appendixA.html"><a href="appendixA.html"><i class="fa fa-check"></i><b>A</b> Setting up R</a><ul>
<li class="chapter" data-level="A.1" data-path="appendixA.html"><a href="appendixA.html#package-installation"><i class="fa fa-check"></i><b>A.1</b> Package installation</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="appendixB.html"><a href="appendixB.html"><i class="fa fa-check"></i><b>B</b> Setting up python</a></li>
<li class="chapter" data-level="C" data-path="appendixC.html"><a href="appendixC.html"><i class="fa fa-check"></i><b>C</b> Generating fake data</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">A Quick Start Guide to Survey Research</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="analysis" class="section level1">
<h1><span class="header-section-number">Chapter 3</span> Survey Analysis</h1>
<p>After you’ve fielded your survey, here are the steps to making sense of the data.</p>
<p>This section assumes you have a laptop set up to work with in either R or python. Head over to the Appendix page if you need help with set up.</p>
<div id="organize-your-workspace" class="section level2">
<h2><span class="header-section-number">3.1</span> Organize your workspace</h2>
<p>Before beginning any analysis, you’ll want to set up a reproducible workflow. Below is an adapted suggestion on how to organize your workspace from Ben Marwick, Carl Boettiger, and Lincoln Mullen <span class="citation">(Ben Marwick <a href="#ref-reproducible_workflow">2018</a>)</span>. Keeping your workspace organized is the best way for you and others to understand and reproduce your analysis.</p>
<pre><code>project
|- DESCRIPTION          # project metadata and dependencies 
|- README.md            # top-level description of content and guide to users
|
|- data/                # data files used 
|  +- raw_data.csv      # data files in open formats such as TXT, CSV, TSV, etc.
|  +- cleaned_data.csv  # data files that have been cleaned, merged, etc that you&#39;ll use for survey analysis
|
|- analysis/            # any programmatic code
|  +- my_report.Rmd     # R markdown file with narrative text interwoven with code chunks 
|  +- makefile          # builds a PDF/HTML/DOCX file from the Rmd, code, and data files
|  +- scripts/          # code files (R, shell, etc.) used for data cleaning, analysis and visualisation
|  +- figures/          # saved outputs of your figures
|
|- R/                     
|  +- my_functions.R    # custom R functions that are used more than once throughout the project
|
|- man/
|  +- my_functions.Rd   # documentation for the R functions (auto-generated when using devtools)
|
</code></pre>
<p><strong>R version</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#List the directory names you want to create</span>
folder_names &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;data&quot;</span>, 
                    <span class="st">&quot;data/raw&quot;</span>, 
                    <span class="st">&quot;data/clean&quot;</span>, 
                  <span class="st">&quot;analysis&quot;</span>, 
                    <span class="st">&quot;analysis/scripts&quot;</span>, 
                     <span class="st">&quot;analysis/figures&quot;</span>, 
                  <span class="st">&quot;R&quot;</span>)

<span class="co">#Create the directories</span>
<span class="kw">sapply</span>(folder_names, dir.create)</code></pre></div>
</div>
<div id="data-cleaning" class="section level2">
<h2><span class="header-section-number">3.2</span> Data Cleaning</h2>
<p>Before you can begin looking at the results, you’ll need to clean the data. By “cleaning” the data, we mean edited the raw file into a format that will make the analysis valid and easier.</p>
<div id="load-the-data" class="section level3">
<h3><span class="header-section-number">3.2.1</span> Load the data</h3>
<p>Download your raw survey data as a csv and load it into your your analysis tool of choice (e.g. Ipython notebook or Rstudio)</p>
<p><strong>R version</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># load necessary packages for analysis</span>
<span class="kw">library</span>(tidyverse)        <span class="co">#contains all the library packages to manipulate and transform data</span>
<span class="kw">library</span>(summarytools)     <span class="co">#shortcut tools to visualize summaries of the data</span>

<span class="co"># read/store the data as the variable df (short for dataframe)</span>
<span class="co"># replace &quot;file&quot; with &quot;https://raw.githubusercontent.com/lizmcarey/survey-guide/master/sample_data/Survey_test_data.csv&quot; to download the survey data set</span>
file &lt;-<span class="st"> &quot;./sample_data/Survey_test_data.csv&quot;</span> <span class="co">#load file from folder heirarchy </span>
df &lt;-<span class="st"> </span><span class="kw">read_csv</span>(file)</code></pre></div>
<p><strong>python version</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#load necessary modules for analysis</span>
import pandas as pd

<span class="co">#read/store the data as the variable df (short for dataframe)</span>
df =<span class="st"> </span><span class="kw">pd.read_csv</span>(filename)</code></pre></div>
</div>
<div id="loading-qualtrics-data" class="section level3">
<h3><span class="header-section-number">3.2.2</span> Loading Qualtrics data</h3>
<p>When you download a csv from Qualtrics, it will come with a few extra rows you don’t need. Here are some automated scripts you can add to your makefile to speed up your workflow</p>
<p><strong>R version manual</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Store the column names by reading in the column header</span>
df_names &lt;-<span class="st"> </span><span class="kw">read_csv</span>(file, <span class="dt">n_max=</span><span class="dv">0</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">names</span>()

<span class="co"># Read the entire file</span>
df &lt;-<span class="st"> </span><span class="kw">read_csv</span>(file, 
               <span class="dt">col_names =</span> df_names, <span class="co"># use df_names to title the columns</span>
               <span class="dt">skip =</span> <span class="dv">3</span>)             <span class="co"># skip the first three lines</span>

<span class="co">#store the question names</span>
question_bank &lt;-<span class="st"> </span><span class="kw">read_csv</span>(file, <span class="dt">n_max=</span><span class="dv">1</span>) <span class="op">%&gt;%</span><span class="st">  </span><span class="co"># read in the first row of the file</span>
<span class="st">                 </span><span class="kw">select</span>(<span class="kw">starts_with</span>(<span class="st">&quot;Q&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># select columns that start with Q</span>
<span class="st">                 </span><span class="kw">gather</span>(key, question_text)   <span class="co"># transform data from wide to long</span></code></pre></div>
<p><strong>R version programmatic</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#function to load qualtrics csv and remove extra rows</span>
load_qualtrics_csv &lt;-<span class="st"> </span><span class="cf">function</span>(file) {
  df_names &lt;-<span class="st"> </span><span class="kw">read_csv</span>(file, <span class="dt">n_max =</span> <span class="dv">0</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">names</span>()
  
  df &lt;-<span class="st"> </span><span class="kw">read_csv</span>(file, <span class="dt">col_names =</span> df_names, <span class="dt">skip =</span> <span class="dv">3</span>)
}

<span class="co">#function to store questions</span>
get_questions &lt;-<span class="st"> </span><span class="cf">function</span>(file) {
  qb &lt;-<span class="st"> </span><span class="kw">read_csv</span>(file, <span class="dt">n_max =</span> <span class="dv">1</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">        </span><span class="kw">select</span>(<span class="kw">starts_with</span>(<span class="st">&quot;Q&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">        </span><span class="kw">gather</span>(key, question_text)
}

<span class="co">#Use function to read in survey file, and skip first 3 lines</span>
df &lt;-<span class="st"> </span><span class="kw">load_qualtrics_csv</span>(file)

<span class="co">#Use function to store question wording</span>
question_bank &lt;-<span class="st"> </span><span class="kw">get_questions</span>(file)</code></pre></div>
</div>
<div id="preview-the-data" class="section level3">
<h3><span class="header-section-number">3.2.3</span> Preview the data</h3>
<p>It’s important to get a look at the data to spot any errors in uploading the dataset and the validity of the responses.</p>
<p>You’ll want to check for:</p>
<ul>
<li>Total number of observations/rows</li>
<li>Duplicate responses</li>
<li>Drop off/Abandon rate of the survey</li>
<li>Average survey completion time</li>
<li>“Speeders:” those who couldn’t have completed the survey in a reasonable amount of time</li>
</ul>
<hr />
<p>There are multiple different ways to preview your dataset before analysis. One quick way is to check the first few rows of your data. You can do this with the function <code>head()</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#Check the first 5 rows of data</span>
<span class="kw">head</span>(df)</code></pre></div>
<pre><code>## # A tibble: 6 x 29
##   StartDate           EndDate             Status      IPAddress Progress
##   &lt;dttm&gt;              &lt;dttm&gt;              &lt;chr&gt;       &lt;chr&gt;        &lt;int&gt;
## 1 2019-01-15 13:28:39 2019-01-15 13:28:39 Survey Test &lt;NA&gt;           100
## 2 2019-01-15 13:28:40 2019-01-15 13:28:40 Survey Test &lt;NA&gt;           100
## 3 2019-01-15 13:36:47 2019-01-15 13:36:47 Survey Test &lt;NA&gt;           100
## 4 2019-01-15 13:36:47 2019-01-15 13:36:47 Survey Test &lt;NA&gt;           100
## 5 2019-01-15 13:36:48 2019-01-15 13:36:48 Survey Test &lt;NA&gt;           100
## 6 2019-01-15 13:36:48 2019-01-15 13:36:48 Survey Test &lt;NA&gt;           100
## # ... with 24 more variables: `Duration (in seconds)` &lt;int&gt;,
## #   Finished &lt;chr&gt;, RecordedDate &lt;dttm&gt;, ResponseId &lt;chr&gt;,
## #   RecipientLastName &lt;chr&gt;, RecipientFirstName &lt;chr&gt;,
## #   RecipientEmail &lt;chr&gt;, ExternalReference &lt;chr&gt;, LocationLatitude &lt;dbl&gt;,
## #   LocationLongitude &lt;dbl&gt;, DistributionChannel &lt;chr&gt;,
## #   UserLanguage &lt;chr&gt;, Q1 &lt;chr&gt;, Q2 &lt;chr&gt;, Q3_4 &lt;chr&gt;, Q3_5 &lt;chr&gt;,
## #   Q3_6 &lt;chr&gt;, Q3_7 &lt;chr&gt;, Q3_8 &lt;chr&gt;, Q3_9 &lt;chr&gt;, Q3_10 &lt;chr&gt;,
## #   Q3_10_TEXT &lt;chr&gt;, Q4 &lt;chr&gt;, Q5 &lt;chr&gt;</code></pre>
<hr />
<p>A more comprehensive way to view your dataset is with the <code>skimr</code> package. This package will give an overview of the number of observations and variables in your data.</p>
<p>The missing column should not be greater than 20% of your total number of observations (unless it’s a multiselect question).</p>
<p>Questions with dropoff greater than 20% can signal that the question was difficult for respondents to answer; you should be wary of response bias and consider removing the question from analysis and rewording the question for future survey sends.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(skimr)
<span class="kw">skim</span>(df)</code></pre></div>
<pre><code>## Skim summary statistics
##  n obs: 502 
##  n variables: 29 
## 
## ── Variable type:character ─────────────────────────────────────────
##             variable missing complete   n min  max empty n_unique
##  DistributionChannel       0      502 502   4    4     0        1
##    ExternalReference     502        0 502 Inf -Inf     0        0
##             Finished       0      502 502   4    4     0        1
##            IPAddress     502        0 502 Inf -Inf     0        0
##                   Q1       0      502 502   5   14     0        6
##                   Q2       0      502 502  18   34     0        5
##                Q3_10     184      318 502   5    5     0        1
##           Q3_10_TEXT     184      318 502  51  135     0      318
##                 Q3_4     201      301 502  26   26     0        1
##                 Q3_5     165      337 502  22   22     0        1
##                 Q3_6     174      328 502  21   21     0        1
##                 Q3_7     172      330 502  19   19     0        1
##                 Q3_8     184      318 502  18   18     0        1
##                 Q3_9     162      340 502  23   23     0        1
##                   Q4       0      502 502  11   22     0        7
##                   Q5       0      502 502  53  134     0      502
##       RecipientEmail     502        0 502 Inf -Inf     0        0
##   RecipientFirstName     502        0 502 Inf -Inf     0        0
##    RecipientLastName     502        0 502 Inf -Inf     0        0
##           ResponseId       0      502 502  17   17     0      502
##               Status       0      502 502  11   11     0        1
##         UserLanguage     502        0 502 Inf -Inf     0        0
## 
## ── Variable type:integer ───────────────────────────────────────────
##               variable missing complete   n    mean   sd  p0 p25 p50 p75
##  Duration (in seconds)       0      502 502   0.024 0.15   0   0   0   0
##               Progress       0      502 502 100     0    100 100 100 100
##  p100     hist
##     1 ▇▁▁▁▁▁▁▁
##   100 ▁▁▁▇▁▁▁▁
## 
## ── Variable type:numeric ───────────────────────────────────────────
##           variable missing complete   n    mean sd      p0     p25     p50
##   LocationLatitude       0      502 502   37.77  0   37.77   37.77   37.77
##  LocationLongitude       0      502 502 -122.41  0 -122.41 -122.41 -122.41
##      p75    p100     hist
##    37.77   37.77 ▁▁▁▇▁▁▁▁
##  -122.41 -122.41 ▁▁▁▇▁▁▁▁
## 
## ── Variable type:POSIXct ───────────────────────────────────────────
##      variable missing complete   n        min        max     median
##       EndDate       0      502 502 2019-01-15 2019-01-15 2019-01-15
##  RecordedDate       0      502 502 2019-01-15 2019-01-15 2019-01-15
##     StartDate       0      502 502 2019-01-15 2019-01-15 2019-01-15
##  n_unique
##        74
##        74
##        74</code></pre>
<p>Another package that can give a brief overview of your data is <code>summarytools</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(summarytools)
<span class="kw">view</span>(<span class="kw">dfSummary</span>(df)) <span class="co"># use view lowercase to see html output in the Rstudio viewer pane</span></code></pre></div>
</div>
<div id="joining-data-sets" class="section level3">
<h3><span class="header-section-number">3.2.4</span> Joining data sets</h3>
<p>Sometimes the data you need lives in two tables. <code>dplyr</code> from the <code>tidyverse</code> package makes it easy to join your data sets together. In order to join two tables together, you’ll need a shared unique identifier across the two tables.</p>
<p>Below are all the ways you can join two data sets using R and the corresponding <code>dplyr</code> functions.</p>
<div class="figure">
<img src="figs/combine_datasets.png" />

</div>
<p>You can view this image and additional ways to transform data sets on the <a href="https://www.rstudio.com/wp-content/uploads/2015/02/data-wrangling-cheatsheet.pdf">RStudio Data Wrangling Cheat Sheet</a>.</p>
<p>In <a href="appendixC.html#appendixC">Appendix C</a>, I’ve generated a fake dataset with corresponding ResponseId’s that match to the survey data set (df).</p>
<p>Below I use a left join to merge respondent data table with the survey data table.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">left_join</span>(respondent_data, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;ResponseId&quot;</span> =<span class="st"> &quot;ResponseId&quot;</span>))

<span class="co"># View merged data sets</span>
<span class="kw">skim</span>(df)</code></pre></div>
<pre><code>## Skim summary statistics
##  n obs: 502 
##  n variables: 36 
## 
## ── Variable type:character ─────────────────────────────────────────
##             variable missing complete   n min  max empty n_unique
##                  age       0      502 502   3    8     0        4
##  DistributionChannel       0      502 502   4    4     0        1
##                email       0      502 502   9   22     0      410
##    ExternalReference     502        0 502 Inf -Inf     0        0
##             Finished       0      502 502   4    4     0        1
##           first_name       0      502 502   2   10     0      377
##               gender       0      502 502   4   17     0        4
##            IPAddress     502        0 502 Inf -Inf     0        0
##                  job       0      502 502   3   59     0      345
##                 name       0      502 502   8   27     0      502
##         phone_number       0      502 502  11   20     0      502
##                   Q1       0      502 502   5   14     0        6
##                   Q2       0      502 502  18   34     0        5
##                Q3_10     184      318 502   5    5     0        1
##           Q3_10_TEXT     184      318 502  51  135     0      318
##                 Q3_4     201      301 502  26   26     0        1
##                 Q3_5     165      337 502  22   22     0        1
##                 Q3_6     174      328 502  21   21     0        1
##                 Q3_7     172      330 502  19   19     0        1
##                 Q3_8     184      318 502  18   18     0        1
##                 Q3_9     162      340 502  23   23     0        1
##                   Q4       0      502 502  11   22     0        7
##                   Q5       0      502 502  53  134     0      502
##       RecipientEmail     502        0 502 Inf -Inf     0        0
##   RecipientFirstName     502        0 502 Inf -Inf     0        0
##    RecipientLastName     502        0 502 Inf -Inf     0        0
##           ResponseId       0      502 502  17   17     0      502
##               Status       0      502 502  11   11     0        1
##         UserLanguage     502        0 502 Inf -Inf     0        0
## 
## ── Variable type:integer ───────────────────────────────────────────
##               variable missing complete   n    mean   sd  p0 p25 p50 p75
##  Duration (in seconds)       0      502 502   0.024 0.15   0   0   0   0
##               Progress       0      502 502 100     0    100 100 100 100
##  p100     hist
##     1 ▇▁▁▁▁▁▁▁
##   100 ▁▁▁▇▁▁▁▁
## 
## ── Variable type:numeric ───────────────────────────────────────────
##           variable missing complete   n    mean sd      p0     p25     p50
##   LocationLatitude       0      502 502   37.77  0   37.77   37.77   37.77
##  LocationLongitude       0      502 502 -122.41  0 -122.41 -122.41 -122.41
##      p75    p100     hist
##    37.77   37.77 ▁▁▁▇▁▁▁▁
##  -122.41 -122.41 ▁▁▁▇▁▁▁▁
## 
## ── Variable type:POSIXct ───────────────────────────────────────────
##      variable missing complete   n        min        max     median
##       EndDate       0      502 502 2019-01-15 2019-01-15 2019-01-15
##  RecordedDate       0      502 502 2019-01-15 2019-01-15 2019-01-15
##     StartDate       0      502 502 2019-01-15 2019-01-15 2019-01-15
##  n_unique
##        74
##        74
##        74</code></pre>
</div>
<div id="removing-duplicate-values" class="section level3">
<h3><span class="header-section-number">3.2.5</span> Removing duplicate values</h3>
<p>Respondents may come back to the survey, or try to take the survey a second time on a new device. To ensure a respondent isn’t counted more than once in a survey, be sure to check for duplicate values by using a unique identifier. Common unique indentifiers include: email, embedded user id, or IP address.</p>
<p><strong>View duplicates using janitor package</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(janitor)

df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">get_dupes</span>(IPAddress) <span class="co"># get_dupes is a function available through janitor, can use more than one column to view duplicates</span></code></pre></div>
<p><strong>Manual way to view duplicates</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">u_id &lt;-<span class="st"> </span><span class="kw">quo</span>(IPAddress) <span class="co"># Store unique identifier column, can be IP address, email, etc. </span>

df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(<span class="op">!!</span>u_id) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">       </span><span class="kw">tally</span>() <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">       </span><span class="kw">filter</span>(n <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span>)</code></pre></div>
<pre><code>## # A tibble: 1 x 2
##   IPAddress     n
##   &lt;chr&gt;     &lt;int&gt;
## 1 &lt;NA&gt;        502</code></pre>
<p>You’ll want to remove duplicate responses, and keep the most recent response.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(lubridate) <span class="co"># load library for converting datetimes</span>

<span class="co">#Remove duplicate emails, keep most recent submission</span>
df &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">EndDate =</span> <span class="kw">as_datetime</span>(EndDate, <span class="dt">tz =</span> <span class="st">&quot;America/Los_Angeles&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># converts column to a datetime format </span>
<span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(<span class="op">!!</span>u_id)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(<span class="op">!!</span>u_id) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">slice</span>(<span class="kw">which.max</span>(EndDate)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ungroup</span>() </code></pre></div>

</div>
</div>
</div>



<h3>References</h3>
<div id="refs" class="references">
<div id="ref-reproducible_workflow">
<p>Ben Marwick, Lincoln Mullen, Carl Boettiger. 2018. “Packaging Data Analytical Work Reproducibly Using R (and Friends).” <em>PeerJ</em>, March. <a href="https://peerj.com/preprints/3192/" class="uri">https://peerj.com/preprints/3192/</a>.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="writing-effective-survey-questions.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="appendixA.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": ["Survey-quickstart.pdf", "Survey-quickstart.epub"],
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
